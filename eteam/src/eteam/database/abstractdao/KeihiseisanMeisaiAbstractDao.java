package eteam.database.abstractdao;

import java.util.ArrayList;
import java.util.List;

import eteam.base.EteamAbstractLogic;
import eteam.base.GMap;
import eteam.database.dto.KeihiseisanMeisai;

/**
 * 経費精算明細に対する標準データ操作クラス
 * This code was generated by the tool.
 * This code can not be changed.
 * @author CodeGenerator
 */
public abstract class KeihiseisanMeisaiAbstractDao extends EteamAbstractLogic {

	/**
	 * insert文定型部
	 */
	protected final String insertSql = "INSERT INTO keihiseisan_meisai (denpyou_id, denpyou_edano, shiwake_edano, user_id, shain_no, user_sei, user_mei, shiyoubi, shouhyou_shorui_flg, torihiki_name, tekiyou, zeiritsu, keigen_zeiritsu_kbn, shiharai_kingaku, hontai_kingaku, shouhizeigaku, houjin_card_riyou_flg, kaisha_tehai_flg, kousaihi_shousai_hyouji_flg, kousaihi_ninzuu_riyou_flg, kousaihi_shousai, kousaihi_ninzuu, kousaihi_hitori_kingaku, kari_futan_bumon_cd, kari_futan_bumon_name, torihikisaki_cd, torihikisaki_name_ryakushiki, kari_kamoku_cd, kari_kamoku_name, kari_kamoku_edaban_cd, kari_kamoku_edaban_name, kari_kazei_kbn, kashi_futan_bumon_cd, kashi_futan_bumon_name, kashi_kamoku_cd, kashi_kamoku_name, kashi_kamoku_edaban_cd, kashi_kamoku_edaban_name, kashi_kazei_kbn, uf1_cd, uf1_name_ryakushiki, uf2_cd, uf2_name_ryakushiki, uf3_cd, uf3_name_ryakushiki, uf4_cd, uf4_name_ryakushiki, uf5_cd, uf5_name_ryakushiki, uf6_cd, uf6_name_ryakushiki, uf7_cd, uf7_name_ryakushiki, uf8_cd, uf8_name_ryakushiki, uf9_cd, uf9_name_ryakushiki, uf10_cd, uf10_name_ryakushiki, project_cd, project_name, segment_cd, segment_name_ryakushiki, tekiyou_cd, himoduke_card_meisai, touroku_user_id, touroku_time, koushin_user_id, koushin_time, jigyousha_kbn, shiharaisaki_name, bunri_kbn, kari_shiire_kbn, kashi_shiire_kbn) VALUES "
			+ "(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, current_timestamp, ?, current_timestamp, ?, ?, ?, ?, ?)";

	/**
	 * 主キー条件定型部
	 */
	protected final String whereSql = " WHERE denpyou_id = ? AND denpyou_edano = ?";

	/**
	 * @param map GMap
	 * @return dto (レコードが存在しなければNull)
	 */
	protected KeihiseisanMeisai mapToDto(GMap map) {
		return map == null ? null : new KeihiseisanMeisai(map);
	}

	/**
	 * @param mapList 検索結果GMap
	 * @return dtoList
	 */
	protected List<KeihiseisanMeisai> mapToDto(List<GMap> mapList) {
		List<KeihiseisanMeisai> dtoList = new ArrayList<KeihiseisanMeisai>();
		for (var map : mapList) {
			dtoList.add(new KeihiseisanMeisai(map));
		}
		return dtoList;
	}

	/**
	 * 経費精算明細のレコード有無を判定
	 * @param denpyouId 伝票ID
	 * @param denpyouEdano 伝票枝番号
	 * @return true:exist false:not exist
	 */
	public boolean exists(String denpyouId, int denpyouEdano) {
		return this.find(denpyouId, denpyouEdano) != null;
	}

	/**
	 * 経費精算明細から主キー指定でレコードを取得
	 * @param denpyouId 伝票ID
	 * @param denpyouEdano 伝票枝番号
	 * @return 経費精算明細DTO
	 */
	public KeihiseisanMeisai find(String denpyouId, int denpyouEdano) {
		final String sql = "SELECT * FROM keihiseisan_meisai " + this.whereSql;
		return mapToDto(connection.find(sql, denpyouId, denpyouEdano));
	}

	/**
	 * 経費精算明細からレコードを全件取得 ※大量データ取得に注意
	 * @return List<経費精算明細DTO>
	 */
	public List<KeihiseisanMeisai> load() {
		final String sql = "SELECT * FROM keihiseisan_meisai  ORDER BY denpyou_id, denpyou_edano";
		return mapToDto(connection.load(sql));
	}

	/**
	 * 経費精算明細から一部キー（伝票ID）指定でレコードを取得
	 * @param denpyouId 伝票ID
	 * @return List<経費精算明細>DTO
	 */
	public List<KeihiseisanMeisai> loadByDenpyouId(String denpyouId) {
		final String sql = "SELECT * FROM keihiseisan_meisai WHERE denpyou_id = ? "
							+ "ORDER BY denpyou_id, denpyou_edano";
		return mapToDto(connection.load(sql, denpyouId));
	}
	
	/**
	 * 経費精算明細テーブルを検索する。(参照起票用に法人カード紐付を除外)
	 * @param denpyouId 伝票ID
	 * @return 検索結果
	 */
	public List<KeihiseisanMeisai> loadByDenpyouIdHoujinHimoduke(String denpyouId) {
		final String sql = "SELECT * FROM keihiseisan_meisai WHERE denpyou_id =? AND himoduke_card_meisai IS NULL order by denpyou_edano";
		return mapToDto(connection.load(sql, denpyouId));
	}

	/**
	 * 経費精算明細登録
	 * @param dto 経費精算明細
	 * @param koushinUserId 更新ユーザーID
	 * @return 件数
	 */
	public int insert(KeihiseisanMeisai dto, String koushinUserId) {
		return connection.update(this.insertSql, dto.denpyouId, dto.denpyouEdano, dto.shiwakeEdano, dto.userId, dto.shainNo, dto.userSei, dto.userMei, dto.shiyoubi, dto.shouhyouShoruiFlg, dto.torihikiName, dto.tekiyou, dto.zeiritsu, dto.keigenZeiritsuKbn, dto.shiharaiKingaku, dto.hontaiKingaku, dto.shouhizeigaku, dto.houjinCardRiyouFlg, dto.kaishaTehaiFlg, dto.kousaihiShousaiHyoujiFlg, dto.kousaihiNinzuuRiyouFlg, dto.kousaihiShousai, dto.kousaihiNinzuu, dto.kousaihiHitoriKingaku, dto.kariFutanBumonCd, dto.kariFutanBumonName, dto.torihikisakiCd, dto.torihikisakiNameRyakushiki, dto.kariKamokuCd, dto.kariKamokuName, dto.kariKamokuEdabanCd, dto.kariKamokuEdabanName, dto.kariKazeiKbn, dto.kashiFutanBumonCd, dto.kashiFutanBumonName, dto.kashiKamokuCd, dto.kashiKamokuName, dto.kashiKamokuEdabanCd, dto.kashiKamokuEdabanName, dto.kashiKazeiKbn, dto.uf1Cd, dto.uf1NameRyakushiki, dto.uf2Cd, dto.uf2NameRyakushiki, dto.uf3Cd, dto.uf3NameRyakushiki, dto.uf4Cd, dto.uf4NameRyakushiki, dto.uf5Cd, dto.uf5NameRyakushiki, dto.uf6Cd, dto.uf6NameRyakushiki, dto.uf7Cd, dto.uf7NameRyakushiki, dto.uf8Cd, dto.uf8NameRyakushiki, dto.uf9Cd, dto.uf9NameRyakushiki, dto.uf10Cd, dto.uf10NameRyakushiki, dto.projectCd, dto.projectName, dto.segmentCd, dto.segmentNameRyakushiki, dto.tekiyouCd, dto.himodukeCardMeisai, koushinUserId, koushinUserId, dto.jigyoushaKbn, dto.shiharaisakiName, dto.bunriKbn, dto.kariShiireKbn, dto.kashiShiireKbn);
	}

	/**
	 * 経費精算明細更新
	 * @param dto 経費精算明細
	 * @param koushinUserId 更新ユーザーID
	 * @return 件数
	 */
	public int update(KeihiseisanMeisai dto, String koushinUserId) {
		final String sql = "UPDATE keihiseisan_meisai SET  shiwake_edano = ?, user_id = ?, shain_no = ?, user_sei = ?, user_mei = ?, shiyoubi = ?, shouhyou_shorui_flg = ?, torihiki_name = ?, tekiyou = ?, zeiritsu = ?, keigen_zeiritsu_kbn = ?, shiharai_kingaku = ?, hontai_kingaku = ?, shouhizeigaku = ?, houjin_card_riyou_flg = ?, kaisha_tehai_flg = ?, kousaihi_shousai_hyouji_flg = ?, kousaihi_ninzuu_riyou_flg = ?, kousaihi_shousai = ?, kousaihi_ninzuu = ?, kousaihi_hitori_kingaku = ?, kari_futan_bumon_cd = ?, kari_futan_bumon_name = ?, torihikisaki_cd = ?, torihikisaki_name_ryakushiki = ?, kari_kamoku_cd = ?, kari_kamoku_name = ?, kari_kamoku_edaban_cd = ?, kari_kamoku_edaban_name = ?, kari_kazei_kbn = ?, kashi_futan_bumon_cd = ?, kashi_futan_bumon_name = ?, kashi_kamoku_cd = ?, kashi_kamoku_name = ?, kashi_kamoku_edaban_cd = ?, kashi_kamoku_edaban_name = ?, kashi_kazei_kbn = ?, uf1_cd = ?, uf1_name_ryakushiki = ?, uf2_cd = ?, uf2_name_ryakushiki = ?, uf3_cd = ?, uf3_name_ryakushiki = ?, uf4_cd = ?, uf4_name_ryakushiki = ?, uf5_cd = ?, uf5_name_ryakushiki = ?, uf6_cd = ?, uf6_name_ryakushiki = ?, uf7_cd = ?, uf7_name_ryakushiki = ?, uf8_cd = ?, uf8_name_ryakushiki = ?, uf9_cd = ?, uf9_name_ryakushiki = ?, uf10_cd = ?, uf10_name_ryakushiki = ?, project_cd = ?, project_name = ?, segment_cd = ?, segment_name_ryakushiki = ?, tekiyou_cd = ?, himoduke_card_meisai = ?, koushin_user_id = ?, koushin_time = current_timestamp, jigyousha_kbn = ?, shiharaisaki_name = ?, bunri_kbn = ?, kari_shiire_kbn = ?, kashi_shiire_kbn = ? " + this.whereSql;
		return connection.update(sql, dto.shiwakeEdano, dto.userId, dto.shainNo, dto.userSei, dto.userMei, dto.shiyoubi, dto.shouhyouShoruiFlg, dto.torihikiName, dto.tekiyou, dto.zeiritsu, dto.keigenZeiritsuKbn, dto.shiharaiKingaku, dto.hontaiKingaku, dto.shouhizeigaku, dto.houjinCardRiyouFlg, dto.kaishaTehaiFlg, dto.kousaihiShousaiHyoujiFlg, dto.kousaihiNinzuuRiyouFlg, dto.kousaihiShousai, dto.kousaihiNinzuu, dto.kousaihiHitoriKingaku, dto.kariFutanBumonCd, dto.kariFutanBumonName, dto.torihikisakiCd, dto.torihikisakiNameRyakushiki, dto.kariKamokuCd, dto.kariKamokuName, dto.kariKamokuEdabanCd, dto.kariKamokuEdabanName, dto.kariKazeiKbn, dto.kashiFutanBumonCd, dto.kashiFutanBumonName, dto.kashiKamokuCd, dto.kashiKamokuName, dto.kashiKamokuEdabanCd, dto.kashiKamokuEdabanName, dto.kashiKazeiKbn, dto.uf1Cd, dto.uf1NameRyakushiki, dto.uf2Cd, dto.uf2NameRyakushiki, dto.uf3Cd, dto.uf3NameRyakushiki, dto.uf4Cd, dto.uf4NameRyakushiki, dto.uf5Cd, dto.uf5NameRyakushiki, dto.uf6Cd, dto.uf6NameRyakushiki, dto.uf7Cd, dto.uf7NameRyakushiki, dto.uf8Cd, dto.uf8NameRyakushiki, dto.uf9Cd, dto.uf9NameRyakushiki, dto.uf10Cd, dto.uf10NameRyakushiki, dto.projectCd, dto.projectName, dto.segmentCd, dto.segmentNameRyakushiki, dto.tekiyouCd, dto.himodukeCardMeisai, koushinUserId, dto.jigyoushaKbn, dto.shiharaisakiName, dto.bunriKbn, dto.kariShiireKbn, dto.kashiShiireKbn, dto.denpyouId, dto.denpyouEdano);
	}

	/**
	 * 経費精算明細登録or更新
	 * 仕様上Insert/Updateの一方のみ処理される場合は使用不可
	 * @param dto 経費精算明細
	 * @param koushinUserId 更新ユーザーID
	 * @return 件数
	 */
	public int upsert(KeihiseisanMeisai dto, String koushinUserId) {
		final String sql = this.insertSql
			+ " ON CONFLICT ON CONSTRAINT keihiseisan_meisai_pkey "
			+ "DO UPDATE SET  shiwake_edano = ?, user_id = ?, shain_no = ?, user_sei = ?, user_mei = ?, shiyoubi = ?, shouhyou_shorui_flg = ?, torihiki_name = ?, tekiyou = ?, zeiritsu = ?, keigen_zeiritsu_kbn = ?, shiharai_kingaku = ?, hontai_kingaku = ?, shouhizeigaku = ?, houjin_card_riyou_flg = ?, kaisha_tehai_flg = ?, kousaihi_shousai_hyouji_flg = ?, kousaihi_ninzuu_riyou_flg = ?, kousaihi_shousai = ?, kousaihi_ninzuu = ?, kousaihi_hitori_kingaku = ?, kari_futan_bumon_cd = ?, kari_futan_bumon_name = ?, torihikisaki_cd = ?, torihikisaki_name_ryakushiki = ?, kari_kamoku_cd = ?, kari_kamoku_name = ?, kari_kamoku_edaban_cd = ?, kari_kamoku_edaban_name = ?, kari_kazei_kbn = ?, kashi_futan_bumon_cd = ?, kashi_futan_bumon_name = ?, kashi_kamoku_cd = ?, kashi_kamoku_name = ?, kashi_kamoku_edaban_cd = ?, kashi_kamoku_edaban_name = ?, kashi_kazei_kbn = ?, uf1_cd = ?, uf1_name_ryakushiki = ?, uf2_cd = ?, uf2_name_ryakushiki = ?, uf3_cd = ?, uf3_name_ryakushiki = ?, uf4_cd = ?, uf4_name_ryakushiki = ?, uf5_cd = ?, uf5_name_ryakushiki = ?, uf6_cd = ?, uf6_name_ryakushiki = ?, uf7_cd = ?, uf7_name_ryakushiki = ?, uf8_cd = ?, uf8_name_ryakushiki = ?, uf9_cd = ?, uf9_name_ryakushiki = ?, uf10_cd = ?, uf10_name_ryakushiki = ?, project_cd = ?, project_name = ?, segment_cd = ?, segment_name_ryakushiki = ?, tekiyou_cd = ?, himoduke_card_meisai = ?, koushin_user_id = ?, koushin_time = current_timestamp, jigyousha_kbn = ?, shiharaisaki_name = ?, bunri_kbn = ?, kari_shiire_kbn = ?, kashi_shiire_kbn = ? ";
		return connection.update(sql, dto.denpyouId, dto.denpyouEdano, dto.shiwakeEdano, dto.userId, dto.shainNo, dto.userSei, dto.userMei, dto.shiyoubi, dto.shouhyouShoruiFlg, dto.torihikiName, dto.tekiyou, dto.zeiritsu, dto.keigenZeiritsuKbn, dto.shiharaiKingaku, dto.hontaiKingaku, dto.shouhizeigaku, dto.houjinCardRiyouFlg, dto.kaishaTehaiFlg, dto.kousaihiShousaiHyoujiFlg, dto.kousaihiNinzuuRiyouFlg, dto.kousaihiShousai, dto.kousaihiNinzuu, dto.kousaihiHitoriKingaku, dto.kariFutanBumonCd, dto.kariFutanBumonName, dto.torihikisakiCd, dto.torihikisakiNameRyakushiki, dto.kariKamokuCd, dto.kariKamokuName, dto.kariKamokuEdabanCd, dto.kariKamokuEdabanName, dto.kariKazeiKbn, dto.kashiFutanBumonCd, dto.kashiFutanBumonName, dto.kashiKamokuCd, dto.kashiKamokuName, dto.kashiKamokuEdabanCd, dto.kashiKamokuEdabanName, dto.kashiKazeiKbn, dto.uf1Cd, dto.uf1NameRyakushiki, dto.uf2Cd, dto.uf2NameRyakushiki, dto.uf3Cd, dto.uf3NameRyakushiki, dto.uf4Cd, dto.uf4NameRyakushiki, dto.uf5Cd, dto.uf5NameRyakushiki, dto.uf6Cd, dto.uf6NameRyakushiki, dto.uf7Cd, dto.uf7NameRyakushiki, dto.uf8Cd, dto.uf8NameRyakushiki, dto.uf9Cd, dto.uf9NameRyakushiki, dto.uf10Cd, dto.uf10NameRyakushiki, dto.projectCd, dto.projectName, dto.segmentCd, dto.segmentNameRyakushiki, dto.tekiyouCd, dto.himodukeCardMeisai, koushinUserId, koushinUserId, dto.jigyoushaKbn, dto.shiharaisakiName, dto.bunriKbn, dto.kariShiireKbn, dto.kashiShiireKbn, dto.shiwakeEdano, dto.userId, dto.shainNo, dto.userSei, dto.userMei, dto.shiyoubi, dto.shouhyouShoruiFlg, dto.torihikiName, dto.tekiyou, dto.zeiritsu, dto.keigenZeiritsuKbn, dto.shiharaiKingaku, dto.hontaiKingaku, dto.shouhizeigaku, dto.houjinCardRiyouFlg, dto.kaishaTehaiFlg, dto.kousaihiShousaiHyoujiFlg, dto.kousaihiNinzuuRiyouFlg, dto.kousaihiShousai, dto.kousaihiNinzuu, dto.kousaihiHitoriKingaku, dto.kariFutanBumonCd, dto.kariFutanBumonName, dto.torihikisakiCd, dto.torihikisakiNameRyakushiki, dto.kariKamokuCd, dto.kariKamokuName, dto.kariKamokuEdabanCd, dto.kariKamokuEdabanName, dto.kariKazeiKbn, dto.kashiFutanBumonCd, dto.kashiFutanBumonName, dto.kashiKamokuCd, dto.kashiKamokuName, dto.kashiKamokuEdabanCd, dto.kashiKamokuEdabanName, dto.kashiKazeiKbn, dto.uf1Cd, dto.uf1NameRyakushiki, dto.uf2Cd, dto.uf2NameRyakushiki, dto.uf3Cd, dto.uf3NameRyakushiki, dto.uf4Cd, dto.uf4NameRyakushiki, dto.uf5Cd, dto.uf5NameRyakushiki, dto.uf6Cd, dto.uf6NameRyakushiki, dto.uf7Cd, dto.uf7NameRyakushiki, dto.uf8Cd, dto.uf8NameRyakushiki, dto.uf9Cd, dto.uf9NameRyakushiki, dto.uf10Cd, dto.uf10NameRyakushiki, dto.projectCd, dto.projectName, dto.segmentCd, dto.segmentNameRyakushiki, dto.tekiyouCd, dto.himodukeCardMeisai, koushinUserId, dto.jigyoushaKbn, dto.shiharaisakiName, dto.bunriKbn, dto.kariShiireKbn, dto.kashiShiireKbn);
	}

	/**
	 * 経費精算明細から主キー指定でレコードを削除
	 * @param denpyouId 伝票ID
	 * @param denpyouEdano 伝票枝番号
	 * @return 削除件数
	 */
	public int delete(String denpyouId, int denpyouEdano) {
		final String sql = "DELETE FROM keihiseisan_meisai " + this.whereSql;
		return connection.update(sql, denpyouId, denpyouEdano);
	}
	
	/**
	 * 経費精算明細から一部キー（伝票ID）指定でレコードを削除
	 * @param denpyouId 伝票ID
	 * @return 削除件数
	 */
	public int deleteByDenpyouId(String denpyouId) {
		final String sql = "DELETE FROM keihiseisan_meisai WHERE denpyou_id = ? ";
		return connection.update(sql, denpyouId);
	}
}